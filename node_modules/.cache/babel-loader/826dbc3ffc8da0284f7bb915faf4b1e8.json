{"remainingRequest":"D:\\Documents\\Desktop\\BIMS_s1\\node_modules\\babel-loader\\lib\\index.js!D:\\Documents\\Desktop\\BIMS_s1\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Documents\\Desktop\\BIMS_s1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\Desktop\\BIMS_s1\\src\\view\\index\\book.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\Desktop\\BIMS_s1\\src\\view\\index\\book.vue","mtime":1664096341037},{"path":"D:\\Documents\\Desktop\\BIMS_s1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663239443669},{"path":"D:\\Documents\\Desktop\\BIMS_s1\\node_modules\\babel-loader\\lib\\index.js","mtime":1663239454289},{"path":"D:\\Documents\\Desktop\\BIMS_s1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663239443669},{"path":"D:\\Documents\\Desktop\\BIMS_s1\\node_modules\\vue-loader\\lib\\index.js","mtime":1663239452314}],"contextDependencies":[],"result":["import \"core-js/modules/es6.date.now\";\nimport \"core-js/modules/es6.array.filter\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport book from \"../bookcenter/image/bookcenter.js\";\nimport shop from \"../../config/shopingcenter/shopcenter.js\";\nimport bill from \"../../config/billcenter/billcenter.js\"; // 格式化日对象\n\nvar getNowDate = function getNowDate() {\n  var date = new Date();\n  var sign2 = \":\";\n  var year = date.getFullYear(); // 年\n\n  var month = date.getMonth() + 1; // 月\n\n  var day = date.getDate(); // 日\n\n  var hour = date.getHours(); // 时\n\n  var minutes = date.getMinutes(); // 分\n\n  var seconds = date.getSeconds(); //秒\n\n  var weekArr = ['星期一', '星期二', '星期三', '星期四', '星期五', '星期六', '星期天'];\n  var week = weekArr[date.getDay()]; // 给一位数的数据前面加 “0”\n\n  if (month >= 1 && month <= 9) {\n    month = \"0\" + month;\n  }\n\n  if (day >= 0 && day <= 9) {\n    day = \"0\" + day;\n  }\n\n  if (hour >= 0 && hour <= 9) {\n    hour = \"0\" + hour;\n  }\n\n  if (minutes >= 0 && minutes <= 9) {\n    minutes = \"0\" + minutes;\n  }\n\n  if (seconds >= 0 && seconds <= 9) {\n    seconds = \"0\" + seconds;\n  }\n\n  return year + \"-\" + month + \"-\" + day + \" \" + hour + sign2 + minutes + sign2 + seconds;\n};\n\nexport default {\n  watch: {\n    num: function num(n, o) {\n      if (n == 0) {\n        this.shoping.num = this.num;\n        shop.commit({\n          type: 'del',\n          data: this.shoping\n        });\n        this.state = true;\n        this.$notify({\n          title: '移出购物车',\n          message: '移出购物车成功',\n          type: 'success'\n        });\n      } else if (o != 0) {\n        this.shoping.num = this.num;\n        shop.commit({\n          type: 'edit',\n          data: this.shoping\n        });\n      }\n    }\n  },\n  filters: {\n    getnum: function getnum(data) {\n      return book.state.bookData.filter(function (p) {\n        return p.id == data;\n      })[0].num;\n    }\n  },\n  computed: {\n    getstate: function getstate() {\n      return shop.getters.getBookShop;\n    }\n  },\n  data: function data() {\n    return {\n      num: 0,\n      state: true,\n      shoping: '',\n      thisbook: ''\n    };\n  },\n  methods: {\n    loginstate: function loginstate() {\n      this.$emit(\"loginstate\", {\n        flag: true\n      });\n    },\n    addtoshopcar: function addtoshopcar(item) {\n      var _this = this;\n\n      if (!this.$store.state.f) {\n        this.$emit(\"loginstate\", {\n          flag: true\n        });\n        return;\n      } // 判断书籍数量是否可供应\n\n\n      if (book.state.bookData.filter(function (p) {\n        return p.id == _this.thisbook.id && p.num > 0;\n      }).length < 1) {\n        // console.log(this.thisbook.name, this.thisbook.num)\n        this.$notify({\n          title: '提示',\n          message: '该书库存不足'\n        });\n        return;\n      }\n\n      this.num = 1;\n      this.shoping = {\n        uid: this.$store.state.id,\n        book: this.thisbook,\n        num: this.num\n      };\n      shop.commit({\n        type: 'insertShop',\n        data: this.shoping\n      });\n      this.state = false;\n      this.$notify({\n        title: '加入购物车',\n        message: '加入购物车成功',\n        type: 'success'\n      }); // console.log(shop.state.shoplist)\n    },\n    costmoney: function costmoney() {\n      var _this2 = this;\n\n      // 判断书籍数量是否可供应\n      if (book.state.bookData.filter(function (p) {\n        return p.id == _this2.shoping.book.id && !(p.num < _this2.shoping.num);\n      }).length < 1) {\n        // console.log(this.thisbook.name, this.thisbook.num)\n        this.$notify({\n          title: '提示',\n          message: '该书库存不足'\n        });\n        return;\n      } // 生成订单\n\n\n      var temp = {\n        uid: this.$store.state.id,\n        create_time: getNowDate(),\n        id: Date.now(),\n        status: '1',\n        total_payment: parseFloat(this.shoping.num) * parseFloat(this.thisbook.price),\n        list: [this.shoping],\n        start: 0,\n        point: 0 // 删除购物车信息\n\n      };\n      shop.commit({\n        type: 'del',\n        data: this.shoping\n      });\n      this.state = true; // 修改书籍最大数量\n\n      book.commit({\n        type: 'editBookNum',\n        data: this.shoping\n      }); // console.log(this.shoping)\n      //插入订单 \n\n      bill.commit({\n        type: 'insertBillList',\n        data: temp\n      });\n      this.$notify({\n        title: '订单',\n        message: '新的订单已产生，请随即前往订单记录页面支付订单',\n        type: 'success'\n      });\n      this.$router.push('/blog');\n    },\n    goshopcar: function goshopcar() {\n      this.$router.push('/shopcar');\n    }\n  },\n  created: function created() {\n    var _this3 = this;\n\n    if (this.$store.state.f) {\n      shop.commit({\n        type: \"setUid\",\n        data: this.$store.state.id\n      });\n    }\n\n    this.thisbook = book.state.bookData.filter(function (p) {\n      return p.id == _this3.$route.query.id;\n    })[0];\n\n    if (this.getstate.length > 0) {\n      this.state = false;\n      this.shoping = JSON.parse(JSON.stringify(this.getstate[0]));\n      this.num = this.shoping.num;\n    }\n  }\n};",{"version":3,"sources":["book.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"book_content\">\r\n\t\t<div class=\"book_info\">\r\n\t\t\t<div class=\"bookL\">\r\n\t\t\t\t<a><img :src=\"thisbook.imgurl\" style=\"width:156px;height:208px\"></a>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"bookR\">\r\n\t\t\t\t<div class=\"bookinfo1\">\r\n\t\t\t\t\t<div class=\"bookname\">\r\n\t\t\t\t\t\t<h2>{{thisbook.name}}</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<span class=\"author\" style=\"margin-right:12px\">作者:{{thisbook.author}}</span>\r\n\t\t\t\t\t\t<span class=\"otherinfo\" style=\"margin-right: 12px;\">出版社:{{thisbook.publisher}}</span>\r\n\t\t\t\t\t\t<span class=\"otherinfo\" style=\"margin-right: 12px;\">出版年份:{{thisbook.publication_year}}</span>\r\n\t\t\t\t\t\t<span style=\"margin-right: 12px;\">类别: <span v-for=\"(i,n) in thisbook.booktype\"\r\n\t\t\t\t\t\t\t\t:key=\"i\">{{i}}</span></span>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"bookinfo2\">\r\n\t\t\t\t\t<div class=\"left\">\r\n\t\t\t\t\t\t<p>价格:<i style=\"margin-left: 5px;\">{{thisbook.price}}元</i></p>\r\n\t\t\t\t\t\t<el-button v-if=\"thisbook.num<1\" type=\"info\" round>暂无货源</el-button>\r\n\t\t\t\t\t\t<el-button v-if=\"state&&thisbook.num>0\" type=\"danger\" round @click=\"addtoshopcar(thisbook)\">\r\n\t\t\t\t\t\t\t加入购物车</el-button>\r\n\t\t\t\t\t\t<el-input-number v-if=\"!state\" :min=\"0\" :max=\"thisbook.id | getnum\" v-model=\"num\">\r\n\t\t\t\t\t\t</el-input-number>\r\n\t\t\t\t\t\t<el-button v-if=\"!state\" type=\"danger\" round style=\"margin-left:20px\" @click=\"goshopcar\">前往购物车\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button v-if=\"!state\" type=\"danger\" round style=\"margin-left:20px\" @click=\"costmoney\">去结算\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"bookinfo3\">\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{{thisbook.introduction}}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<router-view v-on:loginstate=\"loginstate\"></router-view>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport book from '../bookcenter/image/bookcenter.js'\r\n\timport shop from '../../config/shopingcenter/shopcenter.js';\r\n\timport bill from '../../config/billcenter/billcenter.js'\r\n\r\n\t// 格式化日对象\r\n\tconst getNowDate = () => {\r\n\t\tvar date = new Date();\r\n\t\tvar sign2 = \":\";\r\n\t\tvar year = date.getFullYear() // 年\r\n\t\tvar month = date.getMonth() + 1; // 月\r\n\t\tvar day = date.getDate(); // 日\r\n\t\tvar hour = date.getHours(); // 时\r\n\t\tvar minutes = date.getMinutes(); // 分\r\n\t\tvar seconds = date.getSeconds() //秒\r\n\t\tvar weekArr = ['星期一', '星期二', '星期三', '星期四', '星期五', '星期六', '星期天'];\r\n\t\tvar week = weekArr[date.getDay()];\r\n\t\t// 给一位数的数据前面加 “0”\r\n\t\tif (month >= 1 && month <= 9) {\r\n\t\t\tmonth = \"0\" + month;\r\n\t\t}\r\n\t\tif (day >= 0 && day <= 9) {\r\n\t\t\tday = \"0\" + day;\r\n\t\t}\r\n\t\tif (hour >= 0 && hour <= 9) {\r\n\t\t\thour = \"0\" + hour;\r\n\t\t}\r\n\t\tif (minutes >= 0 && minutes <= 9) {\r\n\t\t\tminutes = \"0\" + minutes;\r\n\t\t}\r\n\t\tif (seconds >= 0 && seconds <= 9) {\r\n\t\t\tseconds = \"0\" + seconds;\r\n\t\t}\r\n\t\treturn year + \"-\" + month + \"-\" + day + \" \" + hour + sign2 + minutes + sign2 + seconds;\r\n\t}\r\n\r\n\texport default {\r\n\t\twatch: {\r\n\t\t\tnum(n, o) {\r\n\t\t\t\tif (n == 0) {\r\n\t\t\t\t\tthis.shoping.num = this.num\r\n\t\t\t\t\tshop.commit({\r\n\t\t\t\t\t\ttype: 'del',\r\n\t\t\t\t\t\tdata: this.shoping\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.state = true;\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '移出购物车',\r\n\t\t\t\t\t\tmessage: '移出购物车成功',\r\n\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (o != 0) {\r\n\t\t\t\t\tthis.shoping.num = this.num\r\n\t\t\t\t\tshop.commit({\r\n\t\t\t\t\t\ttype: 'edit',\r\n\t\t\t\t\t\tdata: this.shoping\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\tgetnum(data) {\r\n\t\t\t\treturn book.state.bookData.filter(p => p.id == data)[0].num;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tgetstate() {\r\n\t\t\t\treturn shop.getters.getBookShop;\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tnum: 0,\r\n\t\t\t\tstate: true,\r\n\t\t\t\tshoping: '',\r\n\t\t\t\tthisbook: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tloginstate() {\r\n\t\t\t\tthis.$emit(\"loginstate\", {\r\n\t\t\t\t\tflag: true\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\taddtoshopcar(item) {\r\n\t\t\t\tif (!this.$store.state.f) {\r\n\t\t\t\t\tthis.$emit(\"loginstate\", {\r\n\t\t\t\t\t\tflag: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t// 判断书籍数量是否可供应\r\n\t\t\t\tif (book.state.bookData.filter(p => p.id == this.thisbook.id && p.num > 0).length < 1) {\r\n\t\t\t\t\t// console.log(this.thisbook.name, this.thisbook.num)\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tmessage: '该书库存不足',\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.num = 1;\r\n\t\t\t\tthis.shoping = {\r\n\t\t\t\t\tuid: this.$store.state.id,\r\n\t\t\t\t\tbook: this.thisbook,\r\n\t\t\t\t\tnum: this.num\r\n\t\t\t\t}\r\n\t\t\t\tshop.commit({\r\n\t\t\t\t\ttype: 'insertShop',\r\n\t\t\t\t\tdata: this.shoping\r\n\t\t\t\t})\r\n\t\t\t\tthis.state = false;\r\n\t\t\t\tthis.$notify({\r\n\t\t\t\t\ttitle: '加入购物车',\r\n\t\t\t\t\tmessage: '加入购物车成功',\r\n\t\t\t\t\ttype: 'success'\r\n\t\t\t\t});\r\n\t\t\t\t// console.log(shop.state.shoplist)\r\n\t\t\t},\r\n\t\t\tcostmoney() {\r\n\t\t\t\t// 判断书籍数量是否可供应\r\n\t\t\t\tif (book.state.bookData.filter(p => p.id == this.shoping.book.id && !(p.num < this.shoping.num)).length < 1) {\r\n\t\t\t\t\t// console.log(this.thisbook.name, this.thisbook.num)\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tmessage: '该书库存不足',\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 生成订单\r\n\t\t\t\tvar temp = {\r\n\t\t\t\t\tuid: this.$store.state.id,\r\n\t\t\t\t\tcreate_time: getNowDate(),\r\n\t\t\t\t\tid: Date.now(),\r\n\t\t\t\t\tstatus: '1',\r\n\t\t\t\t\ttotal_payment: parseFloat(this.shoping.num) * parseFloat(this.thisbook.price),\r\n\t\t\t\t\tlist: [this.shoping],\r\n\t\t\t\t\tstart: 0,\r\n\t\t\t\t\tpoint: 0\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 删除购物车信息\r\n\t\t\t\tshop.commit({\r\n\t\t\t\t\ttype: 'del',\r\n\t\t\t\t\tdata: this.shoping\r\n\t\t\t\t})\r\n\t\t\t\tthis.state = true\r\n\r\n\t\t\t\t// 修改书籍最大数量\r\n\t\t\t\tbook.commit({\r\n\t\t\t\t\ttype: 'editBookNum',\r\n\t\t\t\t\tdata: this.shoping\r\n\t\t\t\t})\r\n\t\t\t\t// console.log(this.shoping)\r\n\t\t\t\t//插入订单 \r\n\t\t\t\tbill.commit({\r\n\t\t\t\t\ttype: 'insertBillList',\r\n\t\t\t\t\tdata: temp\r\n\t\t\t\t})\r\n\t\t\t\tthis.$notify({\r\n\t\t\t\t\ttitle: '订单',\r\n\t\t\t\t\tmessage: '新的订单已产生，请随即前往订单记录页面支付订单',\r\n\t\t\t\t\ttype: 'success'\r\n\t\t\t\t});\r\n\t\t\t\tthis.$router.push('/blog')\r\n\t\t\t},\r\n\t\t\tgoshopcar() {\r\n\t\t\t\tthis.$router.push('/shopcar')\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif (this.$store.state.f) {\r\n\t\t\t\tshop.commit({\r\n\t\t\t\t\ttype: \"setUid\",\r\n\t\t\t\t\tdata: this.$store.state.id\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.thisbook = book.state.bookData.filter(p => p.id == this.$route.query.id)[0]\r\n\r\n\t\t\tif (this.getstate.length > 0) {\r\n\t\t\t\tthis.state = false;\r\n\t\t\t\tthis.shoping = JSON.parse(JSON.stringify(this.getstate[0]));\r\n\t\t\t\tthis.num = this.shoping.num;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.book_content {\r\n\t\twidth: 1000px;\r\n\t\tmargin: 42px auto 0;\r\n\t\tposition: relative;\r\n\t\tcolor: #9e9e9e;\r\n\t\tfont: 12px/20px \"Microsoft Yahei\", arial, sans-serif;\r\n\t\tfont-weight: normal;\r\n\t}\r\n\r\n\t*,\r\n\tbody,\r\n\tul,\r\n\tli,\r\n\th1,\r\n\th2,\r\n\th3,\r\n\th4,\r\n\th5 {\r\n\t\tmargin: 0;\r\n\t\tpadding: 0;\r\n\t}\r\n\r\n\t.book_info {\r\n\t\twidth: 1000px;\r\n\t\toverflow: hidden;\r\n\t\tbackground: #fff;\r\n\t}\r\n\r\n\t.book_info .bookL {\r\n\t\tfloat: left;\r\n\t\twidth: 26.9%;\r\n\t}\r\n\r\n\t.book_info .bookL a {\r\n\t\tmargin: 68px auto 0;\r\n\t\twidth: 156px;\r\n\t\theight: 208px;\r\n\t\tdisplay: block;\r\n\t\tposition: relative;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.book_info .bookR {\r\n\t\tfloat: left;\r\n\t\twidth: 73.1%;\r\n\t\toverflow: hidden;\r\n\t\tpadding-bottom: 27px;\r\n\t\tborder-left: 1px solid #f0f0f0;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.bookR .bookinfo1 {\r\n\t\tpadding: 22px 40px 0 30px;\r\n\t\theight: 72px;\r\n\t\tborder-bottom: 1px solid #f0f0f0;\r\n\t}\r\n\r\n\t.bookinfo1 .bookname {\r\n\t\toverflow: hidden;\r\n\t\tmargin-bottom: 15px;\r\n\t\tcolor: #212121;\r\n\t}\r\n\r\n\t.bookinfo1 .bookname h2 {\r\n\t\tmax-width: 438px;\r\n\t\theight: 22px;\r\n\t\toverflow: hidden;\r\n\t\twhite-space: nowrap;\r\n\t\ttext-overflow: ellipsis;\r\n\t\tfloat: left;\r\n\t\tcolor: #212121;\r\n\t\tfont-size: 20px;\r\n\t\tfont-style: normal;\r\n\t\tfont-weight: normal;\r\n\t}\r\n\r\n\t.bookinfo1 p {\r\n\t\toverflow: hidden;\r\n\t\tfont-style: normal;\r\n\t\tfont-weight: normal;\r\n\t}\r\n\r\n\t.bookinfo1 p .otherinfo {\r\n\t\tfloat: left;\r\n\t}\r\n\r\n\t.bookR .bookinfo2 {\r\n\t\tpadding: 24px 40px 0 30px;\r\n\t\theight: 98px;\r\n\t\tborder-bottom: 1px solid #f0f0f0;\r\n\t}\r\n\r\n\t.bookinfo2 .left {\r\n\t\tfloat: left;\r\n\t\twidth: 500px;\r\n\t\tmargin-top: 4px;\r\n\t}\r\n\r\n\t.bookinfo2 .left p {\r\n\t\tmargin-bottom: 10px;\r\n\t\tfont-size: 15px;\r\n\t}\r\n\r\n\t.bookinfo2 .left p i {\r\n\t\tmargin-right: 10px;\r\n\t\tmargin-left: 2px;\r\n\t\tcolor: red;\r\n\t\tfont-size: 25px;\r\n\t\tfont-style: normal;\r\n\t\tfont-weight: normal;\r\n\t}\r\n\r\n\t.bookR .bookinfo3 {\r\n\t\tpadding: 24px 40px 0 30px;\r\n\t}\r\n</style>\n"],"sourceRoot":"src/view/index"}]}