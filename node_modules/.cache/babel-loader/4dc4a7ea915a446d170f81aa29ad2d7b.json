{"remainingRequest":"E:\\Project\\HTML\\BIMS\\node_modules\\babel-loader\\lib\\index.js!E:\\Project\\HTML\\BIMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\Project\\HTML\\BIMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Project\\HTML\\BIMS\\src\\view\\other\\booklist.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Project\\HTML\\BIMS\\src\\view\\other\\booklist.vue","mtime":1663638487088},{"path":"E:\\Project\\HTML\\BIMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663239443669},{"path":"E:\\Project\\HTML\\BIMS\\node_modules\\babel-loader\\lib\\index.js","mtime":1663239454289},{"path":"E:\\Project\\HTML\\BIMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663239443669},{"path":"E:\\Project\\HTML\\BIMS\\node_modules\\vue-loader\\lib\\index.js","mtime":1663239452314}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      booklist: [],\n      total: 0,\n      currentPage: 1,\n      pagesize: 10\n    };\n  },\n  filters: {\n    // 使文字显示少于10个字符，防止页面布局变动\n    ellipsis: function ellipsis(value) {\n      if (!value) return \"\";\n\n      if (value.length > 10) {\n        return value.slice(0, 10) + \"...\";\n      }\n\n      return value;\n    },\n    // 防止图片内容不符\n    geturl: function geturl(url, n) {\n      // console.log(url,n)\n      var url2 = \"http://celiang.oss-cn-hangzhou.aliyuncs.com/measurement/2022-05/19/G0JSVphpS2MItH1652924237220519.jpg\";\n      var img = new Image();\n      img.src = url;\n      img.onload;\n      setTimeout(function (that) {\n        if (img.width < 10 || img.height < 10) {\n          n.imgurl = url2;\n        }\n      }, 1500);\n      return url;\n    }\n  },\n  mounted: function mounted() {\n    var that = this;\n    console.log(this.currentPage, this.pagesize);\n    axios.get('http://127.0.0.1/book/booklist', {\n      params: {\n        size: this.pagesize,\n        page: (this.currentPage - 1) * this.pagesize\n      }\n    }).then(function (res) {\n      console.log(res.data);\n      that.booklist = res.data[0];\n      that.total = res.data[1][0].num;\n    }).catch(function (err) {\n      console.log(\"获取数据失败\" + err);\n    });\n  },\n  methods: {\n    //分页\n    gai: function gai(currentPage) {\n      this.currentPage = currentPage;\n      var that = this;\n      axios.get('http://127.0.0.1/book/booklist', {\n        params: {\n          size: this.pagesize,\n          page: (this.currentPage - 1) * this.pagesize\n        }\n      }).then(function (res) {\n        console.log(res.data);\n        that.booklist = res.data[0];\n        that.total = res.data[1][0].num;\n      }).catch(function (err) {\n        console.log(\"获取数据失败\" + err);\n      });\n    },\n    // 页数\n    handleSizeChange: function handleSizeChange(size) {\n      this.pagesize = size;\n      var that = this;\n      axios.get('http://127.0.0.1/book/booklist', {\n        params: {\n          size: this.pagesize,\n          page: (this.currentPage - 1) * this.pagesize\n        }\n      }).then(function (res) {\n        console.log(res.data);\n        that.booklist = res.data[0];\n        that.total = res.data[1][0].num;\n      }).catch(function (err) {\n        console.log(\"获取数据失败\" + err);\n      });\n    },\n    deleteRow: function deleteRow(index, rows) {\n      rows.splice(index, 1);\n    }\n  }\n};",{"version":3,"sources":["booklist.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-table :data=\"booklist\" style=\"width: 100%;\" max-height=\"540\">\r\n\t\t\t<el-table-column type=\"index\" label=\"序号\" width=\"50\" fixed></el-table-column>\r\n\t\t\t<el-table-column prop=\"isbn\" label=\"ISBN\" width=\"150\" fixed></el-table-column>\r\n\t\t\t<el-table-column prop=\"title\" label=\"书名\" width=\"120\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tooltip :content=\"scope.row.title\" placement=\"top\" effect=\"light\">\r\n\t\t\t\t\t\t<span>{{scope.row.title | ellipsis}}</span>\r\n\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"封面\" width=\"120\" prop=\"imgurl\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-popover placement=\"top-start\" title=\"\" trigger=\"hover\">\r\n\t\t\t\t\t\t<img :src=\"scope.row.imgurl  | geturl(scope.row,scope.row.imgurl)\" alt=\"\"\r\n\t\t\t\t\t\t\tstyle=\"width: 160px;height: 210px\">\r\n\t\t\t\t\t\t<img slot=\"reference\" :src=\"scope.row.imgurl  | geturl(scope.row,scope.row.imgurl)\"\r\n\t\t\t\t\t\t\tstyle=\"width: 80px;height: 106px\">\r\n\t\t\t\t\t</el-popover>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column prop=\"author\" label=\"作者\" width=\"120\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tooltip :content=\"scope.row.author\" placement=\"top\" effect=\"light\">\r\n\t\t\t\t\t<span>{{scope.row.author | ellipsis}}</span>\r\n\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column prop=\"publisher\" label=\"出版社\" width=\"120\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tooltip :content=\"scope.row.publisher\" placement=\"top\" effect=\"light\">\r\n\t\t\t\t\t\t<span>{{scope.row.publisher | ellipsis}}</span>\r\n\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column prop=\"publication_year\" label=\"出版年份\" width=\"120\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"price\" label=\"进价\" width=\"120\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"cell\" label=\"售价\" width=\"120\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"num\" label=\"库存量\" width=\"120\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"num\" label=\"售价\" width=\"120\"></el-table-column>\r\n\r\n\t\t\t<el-table-column fixed=\"right\" label=\"操作\" width=\"120\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button @click.native.prevent=\"deleteRow(scope.$index, tableData)\" type=\"text\" size=\"small\">\r\n\t\t\t\t\t\t移除\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t\t<div v-if=\"total!=0\" style=\"text-align: center;\">\r\n\t\t\t<el-pagination \r\n\t\t\tbackground \r\n\t\t\t@current-change=\"gai\" \r\n\t\t\t@size-change='handleSizeChange'\r\n\t\t\t:current-page=\"currentPage\" \r\n\t\t\t:page-sizes=\"[5, 10, 20, 40,100]\"\r\n\t\t\t:page-size=\"pagesize\" layout=\"sizes, prev, pager, next, total ,jumper\" :total=\"total\">\r\n\t\t\t</el-pagination>\r\n\t\t</div>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport axios from 'axios';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbooklist: [],\r\n\t\t\t\ttotal: 0,\r\n\t\t\t\tcurrentPage: 1,\r\n\t\t\t\tpagesize: 10,\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\t// 使文字显示少于10个字符，防止页面布局变动\r\n\t\t\tellipsis(value) {\r\n\t\t\t\tif (!value)\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\tif (value.length > 10) {\r\n\t\t\t\t\treturn value.slice(0, 10) + \"...\";\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\t\t\t// 防止图片内容不符\r\n\t\t\tgeturl(url, n) {\r\n\t\t\t\t// console.log(url,n)\r\n\t\t\t\tvar url2 =\r\n\t\t\t\t\t\"http://celiang.oss-cn-hangzhou.aliyuncs.com/measurement/2022-05/19/G0JSVphpS2MItH1652924237220519.jpg\";\r\n\t\t\t\tvar img = new Image();\r\n\t\t\t\timg.src = url;\r\n\t\t\t\timg.onload;\r\n\t\t\t\tsetTimeout((that) => {\r\n\t\t\t\t\tif (img.width < 10 || img.height < 10) {\r\n\t\t\t\t\t\tn.imgurl = url2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1500)\r\n\t\t\t\treturn url;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tvar that = this;\r\n\t\t\tconsole.log(this.currentPage,this.pagesize)\r\n\t\t\taxios.get('http://127.0.0.1/book/booklist',{\r\n\t\t\t\tparams:{\r\n\t\t\t\t\tsize:this.pagesize,\r\n\t\t\t\t\tpage:(this.currentPage-1)*this.pagesize\r\n\t\t\t\t}\r\n\t\t\t}).then(res => {\r\n\t\t\t\tconsole.log(res.data)\r\n\t\t\t\tthat.booklist = res.data[0];\r\n\t\t\t\tthat.total = res.data[1][0].num;\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tconsole.log(\"获取数据失败\" + err);\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//分页\r\n\t\t\tgai(currentPage) {\r\n\t\t\t\tthis.currentPage = currentPage;\r\n\t\t\t\tvar that = this;\r\n\t\t\t\taxios.get('http://127.0.0.1/book/booklist',{\r\n\t\t\t\t\tparams:{\r\n\t\t\t\t\t\tsize:this.pagesize,\r\n\t\t\t\t\t\tpage:(this.currentPage-1)*this.pagesize\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\tthat.booklist = res.data[0];\r\n\t\t\t\t\tthat.total = res.data[1][0].num;\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tconsole.log(\"获取数据失败\" + err);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 页数\r\n\t\t\thandleSizeChange: function(size) {\r\n\t\t\t\tthis.pagesize = size;\r\n\t\t\t\tvar that = this;\r\n\t\t\t\taxios.get('http://127.0.0.1/book/booklist',{\r\n\t\t\t\t\tparams:{\r\n\t\t\t\t\t\tsize:this.pagesize,\r\n\t\t\t\t\t\tpage:(this.currentPage-1)*this.pagesize\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\tthat.booklist = res.data[0];\r\n\t\t\t\t\tthat.total = res.data[1][0].num;\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tconsole.log(\"获取数据失败\" + err);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdeleteRow(index, rows) {\r\n\t\t\t\trows.splice(index, 1);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n\r\n<style>\r\n\t/*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/\r\n\t::-webkit-scrollbar {\r\n\t\tbackground-color: #f5f5f5;\r\n\t\twidth: 5px;\r\n\t\theight: 5px;\r\n\t}\r\n\r\n\t/*定义滚动条轨道 内阴影+圆角*/\r\n\t::-webkit-scrollbar-track {\r\n\t\t-webkit-box-shadow: inset 0 0 6px 6px rgba(0, 0, 0, 0.1);\r\n\t\tborder-radius: 10px;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\r\n\t/*定义滑块 内阴影+圆角*/\r\n\t::-webkit-scrollbar-thumb {\r\n\t\tborder-radius: 10px;\r\n\t\t-webkit-box-shadow: inset 0 0 6px 6px rgba(0, 0, 0, 0.3);\r\n\t\tbackground-color: #ddd;\r\n\t}\r\n</style>\n"],"sourceRoot":"src/view/other"}]}