{"remainingRequest":"D:\\杂项\\作业\\第三阶段实训\\vue前端大作业\\图书馆里系统（vue前端）\\node_modules\\thread-loader\\dist\\cjs.js!D:\\杂项\\作业\\第三阶段实训\\vue前端大作业\\图书馆里系统（vue前端）\\node_modules\\babel-loader\\lib\\index.js!D:\\杂项\\作业\\第三阶段实训\\vue前端大作业\\图书馆里系统（vue前端）\\src\\view\\bookcenter\\image\\bookcenter.js","dependencies":[{"path":"D:\\杂项\\作业\\第三阶段实训\\vue前端大作业\\图书馆里系统（vue前端）\\src\\view\\bookcenter\\image\\bookcenter.js","mtime":1664027526802},{"path":"D:\\杂项\\作业\\第三阶段实训\\vue前端大作业\\图书馆里系统（vue前端）\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663239443669},{"path":"D:\\杂项\\作业\\第三阶段实训\\vue前端大作业\\图书馆里系统（vue前端）\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1663239441756},{"path":"D:\\杂项\\作业\\第三阶段实训\\vue前端大作业\\图书馆里系统（vue前端）\\node_modules\\babel-loader\\lib\\index.js","mtime":1663239454289}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es6.regexp.search\";\nimport vue from 'vue';\nimport vuex from 'vuex';\nimport bookdata from \"./bookdata\";\nvue.use(vuex);\nvar bookStore = new vuex.Store({\n  state: {\n    bookData: bookdata.bookList,\n    // 书籍列表\n    bookList: [],\n    // 搜索框\n    search: '',\n    // 每页显示条数\n    pageSize: 5,\n    // 当前页码\n    currentPage: 1,\n    // 数据条数\n    total: 0,\n    // 书籍分类\n    bookType: bookdata.bookTypeList,\n    // 添加修改页面中间变量\n    bookTemp: '',\n    // 首页搜索框\n    IndexSearch: '',\n    // 首页数据\n    IndexbookList: bookdata.bookList\n  },\n  getters: {\n    // 书籍中心获取的数据\n    getBookList: function getBookList(state) {\n      var start = (state.currentPage - 1) * state.pageSize;\n      var end = state.pageSize + start;\n\n      if (state.search != '') {\n        var reg = new RegExp(state.search + '+');\n        var books = state.bookData.filter(function (p) {\n          return p.name.match(reg) || p.author.match(reg) || p.publisher.match(reg) || p.introduction.match(reg) || p.booktype.findIndex(function (i, any) {\n            return state.search === i;\n          }) != -1;\n        });\n        var returnbook = books.slice(start, end);\n\n        while (books.length > 0 && returnbook.length == 0) {\n          state.currentPage = state.currentPage - 1;\n          start = (state.currentPage - 1) * state.pageSize;\n          end = state.pageSize + start;\n          returnbook = books.slice(start, end);\n        }\n\n        vue.set(state, \"total\", books.length);\n        return returnbook;\n      } else {\n        vue.set(state, \"total\", state.bookData.length);\n        return state.bookData.slice(start, end);\n      }\n    },\n    // 用户首页获取的数据\n    getIndexBookList: function getIndexBookList(state) {\n      return state.bookData.filter(function (p) {\n        return p.bookstate == 1;\n      }).slice(0, 6);\n    },\n    getBookTemp: function getBookTemp(state) {\n      return state.bookTemp;\n    },\n    getBookType: function getBookType(state) {\n      return state.bookType;\n    },\n    getTypeBook: function getTypeBook(state) {\n      var books = [];\n      state.bookData.map(function (item, index) {\n        if (item.booktype.findIndex(function (i, any) {\n          return state.search === i;\n        }) != -1) {\n          books.push(item);\n        }\n      });\n      return books;\n    },\n    IndexgetBookListBybooktype: function IndexgetBookListBybooktype(state) {\n      if (state.type == '' || state.type == null) {\n        return state.IndexbookList.filter(function (p) {\n          return p.bookstate == 1;\n        });\n      }\n\n      var books = [];\n      state.IndexbookList.map(function (item, index) {\n        if (item.booktype.findIndex(function (i, any) {\n          return state.type === i;\n        }) != -1) {\n          books.push(item);\n        }\n      });\n      return books.filter(function (p) {\n        return p.bookstate == 1;\n      });\n    },\n    IndexgetSelectedBook: function IndexgetSelectedBook(state) {\n      if (state.IndexSearch != '') {\n        var reg = new RegExp(state.IndexSearch + '+');\n        var books = [];\n        state.IndexbookList.map(function (item, index) {\n          if (item.name.match(reg)) {\n            books.push(item);\n          }\n        });\n        return books.filter(function (p) {\n          return p.bookstate == 1;\n        });\n      } else {\n        return state.bookData.filter(function (p) {\n          return p.bookstate == 1;\n        });\n      }\n    }\n  },\n  mutations: {\n    //分页 \n    updatePageSize: function updatePageSize(state, data) {\n      vue.set(state, \"pageSize\", data.data);\n    },\n    // 页号\n    updatePage: function updatePage(state, data) {\n      vue.set(state, \"currentPage\", data.data);\n    },\n    // 搜索\n    searchData: function searchData(state, data) {\n      vue.set(state, \"search\", data.data);\n    },\n    // 上下架\n    delBook: function delBook(state, data) {\n      var books = state.bookData;\n\n      for (var i = 0; i < books.length; i++) {\n        if (books[i].id == data.data) {\n          books[i].bookstate = data.state;\n          break;\n        }\n      }\n\n      vue.set(state, \"bookData\", books);\n    },\n    editBookNum: function editBookNum(state, data) {\n      var book = JSON.parse(JSON.stringify(state.bookData.filter(function (p) {\n        return p.id == data.data.book.id;\n      })))[0];\n      book.num = parseFloat(book.num) - parseFloat(data.data.num);\n      vue.set(state, \"bookData\", state.bookData.filter(function (p) {\n        return p.id != data.data.book.id;\n      }));\n      state.bookData.push(book);\n    },\n    editBookNumplus: function editBookNumplus(state, data) {\n      var book = JSON.parse(JSON.stringify(state.bookData.filter(function (p) {\n        return p.id == data.data.book.id;\n      })))[0];\n      book.num = parseFloat(book.num) + parseFloat(data.data.num);\n      vue.set(state, \"bookData\", state.bookData.filter(function (p) {\n        return p.id != data.data.book.id;\n      }));\n      state.bookData.push(book);\n    },\n    addBook: function addBook(state, data) {\n      state.bookData.push(data.data);\n    },\n    editBook: function editBook(state, data) {\n      var books = JSON.parse(JSON.stringify(state.bookData));\n\n      for (var i = 0; i < books.length; i++) {\n        if (books[i].id == data.data.id) {\n          books[i] = data.data;\n        }\n      }\n\n      vue.set(state, \"bookData\", books);\n    },\n    toAddBook: function toAddBook(state) {\n      vue.set(state, \"bookTemp\", bookdata.defaultBook);\n    },\n    toEditBook: function toEditBook(state, data) {\n      vue.set(state, \"bookTemp\", data.data);\n    },\n    selectType: function selectType(state, data) {\n      vue.set(state, \"type\", data.data);\n    },\n    IndexsearchData: function IndexsearchData(state, data) {\n      vue.set(state, \"IndexSearch\", data.data);\n    },\n    // 修改分类\n    editbooktype: function editbooktype(state, data) {\n      var booktype = JSON.parse(JSON.stringify(state.bookType));\n      var oldtype = '',\n          newtype = '';\n\n      for (var i = 0; i < booktype.length; i++) {\n        if (booktype[i].id == data.data.id) {\n          oldtype = booktype[i].name;\n          newtype = data.data.name;\n          booktype[i].name = data.data.name;\n          break;\n        }\n      }\n\n      var books = JSON.parse(JSON.stringify(state.bookData));\n\n      for (var i = 0; i < books.length; i++) {\n        var index = books[i].booktype.findIndex(function (i, any) {\n          return oldtype === i;\n        });\n\n        if (index != -1) {\n          books[i].booktype[index] = newtype;\n        }\n      }\n\n      vue.set(state, \"bookData\", books);\n      vue.set(state, \"bookType\", booktype);\n    },\n    addbooktype: function addbooktype(state, data) {\n      state.bookType.push(data.data);\n    }\n  }\n});\nexport default bookStore;",{"version":3,"sources":["D:\\杂项\\作业\\第三阶段实训\\vue前端大作业\\图书馆里系统（vue前端）\\src\\view\\bookcenter\\image\\bookcenter.js"],"names":["vue","vuex","bookdata","use","bookStore","Store","state","bookData","bookList","search","pageSize","currentPage","total","bookType","bookTypeList","bookTemp","IndexSearch","IndexbookList","getters","getBookList","start","end","reg","RegExp","books","filter","p","name","match","author","publisher","introduction","booktype","findIndex","i","any","returnbook","slice","length","set","getIndexBookList","bookstate","getBookTemp","getBookType","getTypeBook","map","item","index","push","IndexgetBookListBybooktype","type","IndexgetSelectedBook","mutations","updatePageSize","data","updatePage","searchData","delBook","id","editBookNum","book","JSON","parse","stringify","num","parseFloat","editBookNumplus","addBook","editBook","toAddBook","defaultBook","toEditBook","selectType","IndexsearchData","editbooktype","oldtype","newtype","addbooktype"],"mappings":"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","sourcesContent":["import vue from 'vue';\r\nimport vuex from 'vuex';\r\nimport bookdata from './bookdata';\r\n\r\nvue.use(vuex);\r\nconst bookStore = new vuex.Store({\r\n\tstate: {\r\n\t\tbookData: bookdata.bookList,\r\n\t\t// 书籍列表\r\n\t\tbookList: [],\r\n\t\t// 搜索框\r\n\t\tsearch: '',\r\n\t\t// 每页显示条数\r\n\t\tpageSize: 5,\r\n\t\t// 当前页码\r\n\t\tcurrentPage: 1,\r\n\t\t// 数据条数\r\n\t\ttotal: 0,\r\n\t\t// 书籍分类\r\n\t\tbookType: bookdata.bookTypeList,\r\n\t\t// 添加修改页面中间变量\r\n\t\tbookTemp: '',\r\n\t\t// 首页搜索框\r\n\t\tIndexSearch: '',\r\n\t\t// 首页数据\r\n\t\tIndexbookList: bookdata.bookList,\r\n\t},\r\n\tgetters: {\r\n\t\t// 书籍中心获取的数据\r\n\t\tgetBookList(state) {\r\n\t\t\tvar start = (state.currentPage - 1) * state.pageSize;\r\n\t\t\tvar end = state.pageSize + start;\r\n\t\t\tif (state.search != '') {\r\n\t\t\t\tvar reg = new RegExp(state.search + '+');\r\n\t\t\t\tvar books = state.bookData.filter(p =>\r\n\t\t\t\t\tp.name.match(reg) ||\r\n\t\t\t\t\tp.author.match(reg) ||\r\n\t\t\t\t\tp.publisher.match(reg) ||\r\n\t\t\t\t\tp.introduction.match(reg) ||\r\n\t\t\t\t\tp.booktype.findIndex((i, any) => {\r\n\t\t\t\t\t\treturn state.search === i\r\n\t\t\t\t\t}) != -1)\r\n\t\t\t\tvar returnbook = books.slice(start, end);\r\n\t\t\t\twhile (books.length > 0 && returnbook.length == 0) {\r\n\t\t\t\t\tstate.currentPage = state.currentPage - 1;\r\n\t\t\t\t\tstart = (state.currentPage - 1) * state.pageSize;\r\n\t\t\t\t\tend = state.pageSize + start;\r\n\t\t\t\t\treturnbook = books.slice(start, end);\r\n\t\t\t\t}\r\n\t\t\t\tvue.set(state, \"total\", books.length)\r\n\t\t\t\treturn returnbook;\r\n\t\t\t} else {\r\n\t\t\t\tvue.set(state, \"total\", state.bookData.length);\r\n\t\t\t\treturn state.bookData.slice(start, end);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 用户首页获取的数据\r\n\t\tgetIndexBookList(state) {\r\n\t\t\treturn state.bookData.filter(p=>p.bookstate==1).slice(0,6)\r\n\t\t},\r\n\r\n\t\tgetBookTemp(state) {\r\n\t\t\treturn state.bookTemp;\r\n\t\t},\r\n\t\tgetBookType(state) {\r\n\t\t\treturn state.bookType;\r\n\t\t},\r\n\t\tgetTypeBook(state) {\r\n\t\t\tvar books = []\r\n\t\t\tstate.bookData.map((item, index) => {\r\n\t\t\t\tif (item.booktype.findIndex((i, any) => {\r\n\t\t\t\t\t\treturn state.search === i\r\n\t\t\t\t\t}) != -1) {\r\n\t\t\t\t\tbooks.push(item)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn books;\r\n\t\t},\r\n\t\tIndexgetBookListBybooktype(state) {\r\n\t\t\tif (state.type == '' || state.type == null) {\r\n\t\t\t\treturn state.IndexbookList.filter(p => p.bookstate == 1);\r\n\t\t\t}\r\n\t\t\tvar books = []\r\n\t\t\tstate.IndexbookList.map((item, index) => {\r\n\t\t\t\tif (item.booktype.findIndex((i, any) => {\r\n\t\t\t\t\t\treturn state.type === i\r\n\t\t\t\t\t}) != -1) {\r\n\t\t\t\t\tbooks.push(item)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn books.filter(p => p.bookstate == 1);\r\n\t\t},\r\n\t\tIndexgetSelectedBook(state) {\r\n\t\t\tif (state.IndexSearch != '') {\r\n\t\t\t\tvar reg = new RegExp(state.IndexSearch + '+');\r\n\t\t\t\tvar books = [];\r\n\t\t\t\tstate.IndexbookList.map((item, index) => {\r\n\t\t\t\t\tif (item.name.match(reg)) {\r\n\t\t\t\t\t\tbooks.push(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn books.filter(p => p.bookstate == 1);\r\n\t\t\t} else {\r\n\t\t\t\treturn state.bookData.filter(p => p.bookstate == 1);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t},\r\n\tmutations: {\r\n\t\t//分页 \r\n\t\tupdatePageSize(state, data) {\r\n\t\t\tvue.set(state, \"pageSize\", data.data)\r\n\t\t},\r\n\t\t// 页号\r\n\t\tupdatePage(state, data) {\r\n\t\t\tvue.set(state, \"currentPage\", data.data)\r\n\t\t},\r\n\t\t// 搜索\r\n\t\tsearchData(state, data) {\r\n\t\t\tvue.set(state, \"search\", data.data)\r\n\t\t},\r\n\t\t// 上下架\r\n\t\tdelBook(state, data) {\r\n\t\t\tvar books = state.bookData;\r\n\t\t\tfor (var i = 0; i < books.length; i++) {\r\n\t\t\t\tif (books[i].id == data.data) {\r\n\t\t\t\t\tbooks[i].bookstate = data.state;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvue.set(state, \"bookData\", books)\r\n\t\t},\r\n\t\teditBookNum(state,data){\r\n\t\t\tvar book = JSON.parse(JSON.stringify(state.bookData.filter(p=>p.id==data.data.book.id)))[0]\r\n\t\t\tbook.num=parseFloat(book.num) - parseFloat(data.data.num) \r\n\t\t\tvue.set(state, \"bookData\", state.bookData.filter(p=>p.id!=data.data.book.id))\r\n\t\t\tstate.bookData.push(book)\r\n\t\t},\r\n\t\teditBookNumplus(state,data){\r\n\t\t\tvar book = JSON.parse(JSON.stringify(state.bookData.filter(p=>p.id==data.data.book.id)))[0]\r\n\t\t\tbook.num=parseFloat(book.num) + parseFloat(data.data.num) \r\n\t\t\tvue.set(state, \"bookData\", state.bookData.filter(p=>p.id!=data.data.book.id))\r\n\t\t\tstate.bookData.push(book)\r\n\t\t},\r\n\t\taddBook(state, data) {\r\n\t\t\tstate.bookData.push(data.data)\r\n\t\t},\r\n\t\teditBook(state, data) {\r\n\t\t\tvar books = JSON.parse(JSON.stringify(state.bookData))\r\n\t\t\tfor (var i = 0; i < books.length; i++) {\r\n\t\t\t\tif (books[i].id == data.data.id) {\r\n\t\t\t\t\tbooks[i] = data.data\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvue.set(state, \"bookData\", books)\r\n\t\t},\r\n\t\ttoAddBook(state) {\r\n\t\t\tvue.set(state, \"bookTemp\", bookdata.defaultBook)\r\n\t\t},\r\n\t\ttoEditBook(state, data) {\r\n\t\t\tvue.set(state, \"bookTemp\", data.data)\r\n\t\t},\r\n\t\tselectType(state, data) {\r\n\t\t\tvue.set(state, \"type\", data.data)\r\n\t\t},\r\n\t\tIndexsearchData(state, data) {\r\n\t\t\tvue.set(state, \"IndexSearch\", data.data)\r\n\t\t},\r\n\t\t// 修改分类\r\n\t\teditbooktype(state, data) {\r\n\t\t\tvar booktype = JSON.parse(JSON.stringify(state.bookType))\r\n\t\t\tvar oldtype = '',\r\n\t\t\t\tnewtype = '';\r\n\t\t\tfor (var i = 0; i < booktype.length; i++) {\r\n\t\t\t\tif (booktype[i].id == data.data.id) {\r\n\t\t\t\t\toldtype = booktype[i].name;\r\n\t\t\t\t\tnewtype = data.data.name;\r\n\t\t\t\t\tbooktype[i].name = data.data.name\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar books = JSON.parse(JSON.stringify(state.bookData))\r\n\t\t\tfor (var i = 0; i < books.length; i++) {\r\n\t\t\t\tvar index = books[i].booktype.findIndex((i, any) => {return oldtype === i});\r\n\t\t\t\tif(index!=-1){\r\n\t\t\t\t\tbooks[i].booktype[index]=newtype;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvue.set(state, \"bookData\", books)\r\n\t\t\tvue.set(state, \"bookType\", booktype)\r\n\t\t}\r\n\t\t,addbooktype(state,data){\r\n\t\t\tstate.bookType.push(data.data)\r\n\t\t}\r\n\t}\r\n})\r\n\r\nexport default bookStore;\n"]}]}