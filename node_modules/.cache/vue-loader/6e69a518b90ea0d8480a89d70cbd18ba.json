{"remainingRequest":"E:\\Project\\HTML\\BIMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Project\\HTML\\BIMS\\src\\view\\bookcenter\\booklist.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Project\\HTML\\BIMS\\src\\view\\bookcenter\\booklist.vue","mtime":1663769433420},{"path":"E:\\Project\\HTML\\BIMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663239443669},{"path":"E:\\Project\\HTML\\BIMS\\node_modules\\babel-loader\\lib\\index.js","mtime":1663239454289},{"path":"E:\\Project\\HTML\\BIMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663239443669},{"path":"E:\\Project\\HTML\\BIMS\\node_modules\\vue-loader\\lib\\index.js","mtime":1663239452314}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport bookStore from './image/bookcenter.js';\nexport default {\n\tcomputed: {\n\t\tbooklist() {\n\t\t\treturn bookStore.getters.getBookList;\n\t\t},\n\t\ttotal() {\n\t\t\treturn bookStore.state.total;\n\t\t},\n\t\tcurrentPage() {\n\t\t\treturn bookStore.state.currentPage;\n\t\t},\n\t\tpageSize() {\n\t\t\treturn bookStore.state.pageSize;\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\n\t\t}\n\t},\n\tfilters: {\n\t\t// 使文字显示少于10个字符，防止页面布局变动\n\t\tshortText(value) {\n\t\t\tif (!value)\n\t\t\t\treturn \"\";\n\t\t\tif (value.length > 5) {\n\t\t\t\treturn value.slice(0, 5) + \"...\";\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\tlongText(value) {\n\t\t\tif (!value)\n\t\t\t\treturn \"\";\n\t\t\tif (value.length > 38) {\n\t\t\t\treturn value.slice(0, 38) + \"...\";\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\n\t\t// 防止图片内容不符\n\t\tgeturl(url, n) {\n\t\t\tvar url2 =\n\t\t\t\t\"http://celiang.oss-cn-hangzhou.aliyuncs.com/measurement/2022-05/19/G0JSVphpS2MItH1652924237220519.jpg\";\n\t\t\tvar img = new Image();\n\t\t\timg.src = url;\n\t\t\timg.onload;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (img.width < 10 || img.height < 10) {\n\t\t\t\t\tn.imgurl = url2;\n\t\t\t\t}\n\t\t\t}, 1500)\n\t\t\treturn url;\n\t\t}\n\t},\n\tmounted() {\n\n\t},\n\tmethods: {\n\t\tdeleteBook(id, state) {\n\t\t\tbookStore.commit({\n\t\t\t\ttype: 'delBook',\n\t\t\t\tdata: id,\n\t\t\t\tstate: state == 1 ? 0 : 1\n\t\t\t})\n\t\t},\n\t\tchangePage(currentPage) {\n\t\t\tbookStore.commit({\n\t\t\t\ttype: 'updatePage',\n\t\t\t\tdata: currentPage\n\t\t\t})\n\t\t},\n\t\tchangePageSize(size) {\n\t\t\tbookStore.commit({\n\t\t\t\ttype: 'updatePageSize',\n\t\t\t\tdata: size\n\t\t\t})\n\t\t},\n\t\topenBook(data){\n\t\t\tbookStore.commit({\n\t\t\t\ttype: 'toEditBook',\n\t\t\t\tdata: data\n\t\t\t})\n\t\t\tthis.$emit(\"t1\",{\n\t\t\t\tflag:true\n\t\t\t})\n\t\t}\n\t}\n}\n",{"version":3,"sources":["booklist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"booklist.vue","sourceRoot":"src/view/bookcenter","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-table :data=\"booklist\" style=\"width: 100%;\" max-height=\"540\">\r\n\t\t\t<el-table-column type=\"index\" label=\"序号\" width=\"50\" fixed></el-table-column>\r\n\t\t\t<el-table-column prop=\"name\" label=\"书名\" width=\"120\" fixed>\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tooltip :content=\"scope.row.name\" placement=\"top\" effect=\"light\">\r\n\t\t\t\t\t\t<span>{{scope.row.name | shortText}}</span>\r\n\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"封面\" width=\"120\" prop=\"imgurl\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-popover placement=\"top-start\" title=\"\" trigger=\"hover\">\r\n\t\t\t\t\t\t<img :src=\"scope.row.imgurl\" alt=\"\" style=\"width: 180px;height: 200px\">\r\n\t\t\t\t\t\t<img slot=\"reference\" :src=\"scope.row.imgurl | geturl(scope.row,scope.row.imgurl) \"\r\n\t\t\t\t\t\t\tstyle=\"width: 90px;height: 106px\">\r\n\t\t\t\t\t</el-popover>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column prop=\"author\" label=\"作者\" width=\"150\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tooltip :content=\"scope.row.author\" placement=\"top\" effect=\"light\">\r\n\t\t\t\t\t\t<span>{{scope.row.author | shortText}}</span>\r\n\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column prop=\"publisher\" label=\"出版社\" width=\"120\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tooltip :content=\"scope.row.publisher\" placement=\"top\" effect=\"light\">\r\n\t\t\t\t\t\t<span>{{scope.row.publisher | shortText}}</span>\r\n\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column prop=\"publication_year\" label=\"出版年份\" width=\"120\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"cell\" label=\"进价\" width=\"80\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"price\" label=\"售价\" width=\"80\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"num\" label=\"库存量\" width=\"80\"></el-table-column>\r\n\t\t\t<el-table-column prop=\"introduction\" label=\"简介\" width=\"300\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-tooltip :content=\"scope.row.introduction\" placement=\"top\" effect=\"light\" width='200'>\r\n\t\t\t\t\t\t<span>{{scope.row.introduction | longText}}</span>\r\n\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column fixed=\"right\" label=\"操作\" width=\"150\" prop=\"bookstate\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<div v-if=\"scope.row.bookstate==0\">\r\n\t\t\t\t\t\t<el-button @click.native.prevent=\"deleteBook(scope.row.id,scope.row.bookstate)\" type=\"danger\">\r\n\t\t\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;下&nbsp;&nbsp;&nbsp;&nbsp;架&nbsp;&nbsp;&nbsp;&nbsp;\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div v-else=\"scope.row.bookstate>0\">\r\n\t\t\t\t\t\t<el-button @click.native.prevent=\"deleteBook(scope.row.id,scope.row.bookstate)\" type=\"success\">\r\n\t\t\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;上&nbsp;&nbsp;&nbsp;&nbsp;架&nbsp;&nbsp;&nbsp;&nbsp;\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"openBook(scope.row)\">\r\n\t\t\t\t\t\t查&nbsp;&nbsp;看&nbsp;详&nbsp;&nbsp;情\r\n\t\t\t\t\t</el-button>\r\n\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t\t<div v-if=\"total!=0\" style=\"text-align: center;\">\r\n\t\t\t<el-pagination background @current-change=\"changePage\" @size-change='changePageSize'\r\n\t\t\t\t:current-page=\"currentPage\" :page-sizes=\"[5, 10]\" :page-size=\"pageSize\"\r\n\t\t\t\tlayout=\"sizes, prev, pager, next, total ,jumper\" :total=\"total\">\r\n\t\t\t</el-pagination>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\t\r\n\timport bookStore from './image/bookcenter.js';\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\tbooklist() {\r\n\t\t\t\treturn bookStore.getters.getBookList;\r\n\t\t\t},\r\n\t\t\ttotal() {\r\n\t\t\t\treturn bookStore.state.total;\r\n\t\t\t},\r\n\t\t\tcurrentPage() {\r\n\t\t\t\treturn bookStore.state.currentPage;\r\n\t\t\t},\r\n\t\t\tpageSize() {\r\n\t\t\t\treturn bookStore.state.pageSize;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\t// 使文字显示少于10个字符，防止页面布局变动\r\n\t\t\tshortText(value) {\r\n\t\t\t\tif (!value)\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\tif (value.length > 5) {\r\n\t\t\t\t\treturn value.slice(0, 5) + \"...\";\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\t\t\tlongText(value) {\r\n\t\t\t\tif (!value)\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\tif (value.length > 38) {\r\n\t\t\t\t\treturn value.slice(0, 38) + \"...\";\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\r\n\t\t\t// 防止图片内容不符\r\n\t\t\tgeturl(url, n) {\r\n\t\t\t\tvar url2 =\r\n\t\t\t\t\t\"http://celiang.oss-cn-hangzhou.aliyuncs.com/measurement/2022-05/19/G0JSVphpS2MItH1652924237220519.jpg\";\r\n\t\t\t\tvar img = new Image();\r\n\t\t\t\timg.src = url;\r\n\t\t\t\timg.onload;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (img.width < 10 || img.height < 10) {\r\n\t\t\t\t\t\tn.imgurl = url2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1500)\r\n\t\t\t\treturn url;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tdeleteBook(id, state) {\r\n\t\t\t\tbookStore.commit({\r\n\t\t\t\t\ttype: 'delBook',\r\n\t\t\t\t\tdata: id,\r\n\t\t\t\t\tstate: state == 1 ? 0 : 1\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tchangePage(currentPage) {\r\n\t\t\t\tbookStore.commit({\r\n\t\t\t\t\ttype: 'updatePage',\r\n\t\t\t\t\tdata: currentPage\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tchangePageSize(size) {\r\n\t\t\t\tbookStore.commit({\r\n\t\t\t\t\ttype: 'updatePageSize',\r\n\t\t\t\t\tdata: size\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\topenBook(data){\r\n\t\t\t\tbookStore.commit({\r\n\t\t\t\t\ttype: 'toEditBook',\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t})\r\n\t\t\t\tthis.$emit(\"t1\",{\r\n\t\t\t\t\tflag:true\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n\r\n<style>\r\n\t/*定义滚动条高宽及背景 高宽分别对应横竖滚动条的尺寸*/\r\n\t::-webkit-scrollbar {\r\n\t\tbackground-color: #f5f5f5;\r\n\t\twidth: 5px;\r\n\t\theight: 5px;\r\n\t}\r\n\r\n\t/*定义滚动条轨道 内阴影+圆角*/\r\n\t::-webkit-scrollbar-track {\r\n\t\t-webkit-box-shadow: inset 0 0 6px 6px rgba(0, 0, 0, 0.1);\r\n\t\tborder-radius: 10px;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\r\n\t/*定义滑块 内阴影+圆角*/\r\n\t::-webkit-scrollbar-thumb {\r\n\t\tborder-radius: 10px;\r\n\t\t-webkit-box-shadow: inset 0 0 6px 6px rgba(0, 0, 0, 0.3);\r\n\t\tbackground-color: #ddd;\r\n\t}\r\n</style>\n"]}]}